!function i(a,l,s){function c(t,e){if(!l[t]){if(!a[t]){var o="function"==typeof require&&require;if(!e&&o)return o(t,!0);if(u)return u(t,!0);var n=new Error("Cannot find module '"+t+"'");throw n.code="MODULE_NOT_FOUND",n}var r=l[t]={exports:{}};a[t][0].call(r.exports,function(e){return c(a[t][1][e]||e)},r,r.exports,i,a,l,s)}return l[t].exports}for(var u="function"==typeof require&&require,e=0;e<s.length;e++)c(s[e]);return c}({1:[function(e,t,o){t.exports=function(t,o){var n=new XMLHttpRequest;n.open("GET",t),n.onload=function(){var e;200===n.status?o(null,JSON.parse(n.responseText)):(e=new Error("Cannot get "+t),o(e))},n.send()}},{}],2:[function(e,t,o){var n=window.location.pathname.split("/").slice(-1)[0].replace("ign","");""==n&&(n=window.location.pathname.split("/").slice(-2)[0].replace("ign","")),e("./get-json.js")("/walks/"+n+"/index.json",function(e,t){if(e)return console.error(e);var o=new ol.style.Style({stroke:new ol.style.Stroke({color:"#000",width:5})}),i=new ol.source.Vector,n=new ol.source.Vector,r=new ol.layer.GeoportalWMTS({layer:"GEOGRAPHICALGRIDSYSTEMS.MAPS"});function a(e){var t=e.parentNode.parentElement.clientWidth-24;800<t&&(t=800),t>e.naturalWidth?(e.style.width=e.naturalWidth+"px",e.style.height=e.naturalHeight+"px"):(e.style.width=t+"px",e.style.height=t*e.naturalHeight/e.naturalWidth+"px"),requestAnimationFrame(function(){map.updateSize()})}window.showImage=function(e){var t=document.getElementById(e+"-images");[].slice.call(t.children).forEach(function(e){e.classList.add("loader");var t=new Image;t.onload=function(){e.src=this.src,e.classList.remove("loader")},t.src=e.getAttribute("data-src"),e.onload=function(){a(e)}}),document.getElementById(e+"-images-btn").style.display="none"},window.onresize=function(){[].slice.call(document.getElementsByTagName("img")).forEach(function(e){"true"==e.getAttribute("showed")&&a(e)})},t.points.forEach(function(e){var t,o,n,r;t=e.coords.longitude,o=e.coords.latitude,n=e.title,(r=new ol.Feature({geometry:new ol.geom.Point(ol.proj.transform([t,o],"EPSG:4326","EPSG:3857"))})).setStyle(new ol.style.Style({image:new ol.style.Icon({anchor:[.5,35],anchorXUnits:"fraction",anchorYUnits:"pixels",opacity:.75,src:"/images/marker_icon.png"}),text:new ol.style.Text({offsetY:-40,font:"14px Calibri,sans-serif",fill:new ol.style.Fill({color:"#e74c3c"}),stroke:new ol.style.Stroke({color:"#fff",width:2}),text:n})})),i.addFeature(r)});var l=[];t.itinerary.forEach(function(e){l.push([e.longitude,e.latitude])}),l.push([t.itinerary[0].longitude,t.itinerary[0].latitude]);var s=new ol.geom.LineString(l);s.transform("EPSG:4326","EPSG:3857"),n.addFeature(new ol.Feature({geometry:s,name:"Line"})),Gp.Services.getConfig({serverUrl:"/autoconf-ign.json",onSuccess:function(){var e=new ol.Map({target:"map",layers:[r,new ol.layer.Vector({source:n,style:o}),new ol.layer.Vector({source:i})],view:new ol.View({center:[0,0],zoom:0})});e.getView().setCenter(ol.proj.transform([t.points[0].coords.longitude,t.points[0].coords.latitude],"EPSG:4326","EPSG:3857")),e.getView().setZoom(15)}})})},{"./get-json.js":1}]},{},[2]);